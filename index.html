<!DOCTYPE HTML>
<html lang="en" >
<html>
<head>
  <title>Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="static/login_style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href='https://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>  
  <link href='https://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'> 
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
</head>

<body class="body">

<div class="login-page">
  <div class="form">

    <form>
      <lottie-player src="https://assets4.lottiefiles.com/datafiles/XRVoUu3IX4sGWtiC3MPpFnJvZNq7lVWDCa8LSqgS/profile.json"  background="transparent"  speed="1"  style="justify-content: center;" loop  autoplay></lottie-player>
      <input type="text" placeholder="&#xf007;  username"/>
      <input type="password" id="password" placeholder="&#xf023;  password"/>
      <i class="fas fa-eye" onclick="show()"></i> 
      <br>
      <br>
      <button>LOGIN</button>
      <p class="message"></p>
    </form>
  </div>
</div>


  <script>
    function show(){
      var password = document.getElementById("password");
      var icon = document.querySelector(".fas")

      // ========== Checking type of password ===========
      if(password.type === "password"){
        password.type = "text";
      }
      else {
        password.type = "password";
      }
    };
  </script>

<script>

  // Load the contents of the text file
  fetch('users.txt')
    .then(response => response.text())
    .then(data => {
      // Split the data into an array of usernames and passwords
      const users = data.split('\n').map(user => user.split(','));

      // Get the login form and add an event listener for form submission
      const form = document.querySelector('.form form');
      form.addEventListener('submit', e => {
        e.preventDefault(); // Prevent the default form submission

        // Get the entered username and password and trim any leading or trailing white space
        const username = form.querySelector('input[type="text"]').value.trim();
        const password = form.querySelector('input[type="password"]').value.trim();

        // Check if the entered username and password match
        const user = users.find(user => user[0].trim() === username && user[1].trim() === password);
        if (user) {
          // Redirect to index.html if the username and password match
          window.location.href = 'input.html';
        } else {
          // Display an error message if the username or password doesn't match
          form.querySelector('.message').textContent = 'Incorrect username or password';
        }
      });
    });
</script>

</body>
</html>
